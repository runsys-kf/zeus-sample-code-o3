"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/payment-result";
exports.ids = ["pages/api/payment-result"];
exports.modules = {

/***/ "(api-node)/./lib/payment-db.js":
/*!***************************!*\
  !*** ./lib/payment-db.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generatePaymentId: () => (/* binding */ generatePaymentId),\n/* harmony export */   getPaymentResultById: () => (/* binding */ getPaymentResultById),\n/* harmony export */   savePaymentResult: () => (/* binding */ savePaymentResult)\n/* harmony export */ });\n// lib/payment-db.js\n// 注: これは簡易的な実装です。実際のアプリケーションでは、\n// データベースまたは永続的なストレージを使用してください。\n// メモリ内のデータストア（開発用）\nconst paymentResults = new Map();\n/**\n * 決済結果を保存する\n * @param {string} id - 決済ID\n * @param {object} result - 決済結果オブジェクト\n */ function savePaymentResult(id, result) {\n    paymentResults.set(id, {\n        ...result,\n        timestamp: new Date().toISOString()\n    });\n    return id;\n}\n/**\n * 決済IDから決済結果を取得する\n * @param {string} id - 決済ID\n * @returns {object|null} 決済結果、存在しない場合はnull\n */ async function getPaymentResultById(id) {\n    return paymentResults.get(id) || null;\n}\n/**\n * 一意の決済IDを生成する\n * @returns {string} 決済ID\n */ function generatePaymentId() {\n    return `pay_${Date.now()}_${Math.random().toString(36).substring(2, 10)}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9wYXltZW50LWRiLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLG9CQUFvQjtBQUNwQixnQ0FBZ0M7QUFDaEMsK0JBQStCO0FBRS9CLG1CQUFtQjtBQUNuQixNQUFNQSxpQkFBaUIsSUFBSUM7QUFFM0I7Ozs7Q0FJQyxHQUNNLFNBQVNDLGtCQUFrQkMsRUFBRSxFQUFFQyxNQUFNO0lBQzFDSixlQUFlSyxHQUFHLENBQUNGLElBQUk7UUFDckIsR0FBR0MsTUFBTTtRQUNURSxXQUFXLElBQUlDLE9BQU9DLFdBQVc7SUFDbkM7SUFDQSxPQUFPTDtBQUNUO0FBRUE7Ozs7Q0FJQyxHQUNNLGVBQWVNLHFCQUFxQk4sRUFBRTtJQUMzQyxPQUFPSCxlQUFlVSxHQUFHLENBQUNQLE9BQU87QUFDbkM7QUFFQTs7O0NBR0MsR0FDTSxTQUFTUTtJQUNkLE9BQU8sQ0FBQyxJQUFJLEVBQUVKLEtBQUtLLEdBQUcsR0FBRyxDQUFDLEVBQUVDLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLFNBQVMsQ0FBQyxHQUFHLEtBQUs7QUFDM0UiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYWlmdWppc2hpbWEvd29ya3NwYWNlcy9wc2otemV1cy1iYXNlZC1vMy9teS16ZXVzLWFwcC9saWIvcGF5bWVudC1kYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvcGF5bWVudC1kYi5qc1xuLy8g5rOoOiDjgZPjgozjga/nsKHmmJPnmoTjgarlrp/oo4XjgafjgZnjgILlrp/pmpvjga7jgqLjg5fjg6rjgrHjg7zjgrfjg6fjg7Pjgafjga/jgIFcbi8vIOODh+ODvOOCv+ODmeODvOOCueOBvuOBn+OBr+awuOe2mueahOOBquOCueODiOODrOODvOOCuOOCkuS9v+eUqOOBl+OBpuOBj+OBoOOBleOBhOOAglxuXG4vLyDjg6Hjg6Ljg6rlhoXjga7jg4fjg7zjgr/jgrnjg4jjgqLvvIjplovnmbrnlKjvvIlcbmNvbnN0IHBheW1lbnRSZXN1bHRzID0gbmV3IE1hcCgpO1xuXG4vKipcbiAqIOaxuua4iOe1kOaenOOCkuS/neWtmOOBmeOCi1xuICogQHBhcmFtIHtzdHJpbmd9IGlkIC0g5rG65riISURcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXN1bHQgLSDmsbrmuIjntZDmnpzjgqrjg5bjgrjjgqfjgq/jg4hcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhdmVQYXltZW50UmVzdWx0KGlkLCByZXN1bHQpIHtcbiAgcGF5bWVudFJlc3VsdHMuc2V0KGlkLCB7XG4gICAgLi4ucmVzdWx0LFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gIH0pO1xuICByZXR1cm4gaWQ7XG59XG5cbi8qKlxuICog5rG65riISUTjgYvjgonmsbrmuIjntZDmnpzjgpLlj5blvpfjgZnjgotcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIOaxuua4iElEXG4gKiBAcmV0dXJucyB7b2JqZWN0fG51bGx9IOaxuua4iOe1kOaenOOAgeWtmOWcqOOBl+OBquOBhOWgtOWQiOOBr251bGxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBheW1lbnRSZXN1bHRCeUlkKGlkKSB7XG4gIHJldHVybiBwYXltZW50UmVzdWx0cy5nZXQoaWQpIHx8IG51bGw7XG59XG5cbi8qKlxuICog5LiA5oSP44Gu5rG65riISUTjgpLnlJ/miJDjgZnjgotcbiAqIEByZXR1cm5zIHtzdHJpbmd9IOaxuua4iElEXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVBheW1lbnRJZCgpIHtcbiAgcmV0dXJuIGBwYXlfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMCl9YDtcbn0gIl0sIm5hbWVzIjpbInBheW1lbnRSZXN1bHRzIiwiTWFwIiwic2F2ZVBheW1lbnRSZXN1bHQiLCJpZCIsInJlc3VsdCIsInNldCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImdldFBheW1lbnRSZXN1bHRCeUlkIiwiZ2V0IiwiZ2VuZXJhdGVQYXltZW50SWQiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/payment-db.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpayment-result&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpayment-result.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpayment-result&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpayment-result.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/payment-result.js */ \"(api-node)/./pages/api/payment-result.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/payment-result\",\n        pathname: \"/api/payment-result\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGcGF5bWVudC1yZXN1bHQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnBheW1lbnQtcmVzdWx0LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx5REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMseURBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvcGF5bWVudC1yZXN1bHQuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3BheW1lbnQtcmVzdWx0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcGF5bWVudC1yZXN1bHRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpayment-result&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpayment-result.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/payment-result.js":
/*!*************************************!*\
  !*** ./pages/api/payment-result.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var xml2js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! xml2js */ \"xml2js\");\n/* harmony import */ var xml2js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(xml2js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_payment_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/payment-db */ \"(api-node)/./lib/payment-db.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// pages/api/payment-result.js\n(__webpack_require__(/*! dotenv */ \"dotenv\").config)();\n\n\n\nconst ZEUS_ENDPOINT = 'https://linkpt.cardservice.co.jp/cgi-bin/secure/api.cgi';\nconst builder = new xml2js__WEBPACK_IMPORTED_MODULE_1__.Builder({\n    headless: true\n});\nasync function handler(req, res) {\n    console.log('リクエストボディ:', req.body);\n    // 環境変数またはデフォルト値を使用\n    const clientIp = process.env.ZEUS_CLIENT_IP || '2019002175';\n    const apiKey = process.env.ZEUS_KEY || '11da83f6e7ab803020e74be300ad3761d55f7f74';\n    try {\n        // zeus_token2.jsからのコールバック - MDとPaResを直接取得\n        const { MD, PaRes, status } = req.body;\n        console.log('MD:', MD);\n        console.log('PaRes:', PaRes);\n        console.log('status:', status);\n        // MDとPaResが存在する場合（zeus_token2.jsからのコールバック）\n        if (MD && PaRes) {\n            console.log('zeus_token2.jsからのコールバックを処理');\n            // 1. AuthReq - 認証結果確認\n            const authReqObj = {\n                request: {\n                    $: {\n                        service: 'secure_link_3d',\n                        action: 'authentication'\n                    },\n                    authentication: [\n                        {\n                            clientip: clientIp,\n                            key: apiKey\n                        }\n                    ],\n                    xid: [\n                        MD\n                    ],\n                    PaRes: [\n                        PaRes\n                    ]\n                }\n            };\n            console.log('AuthReq作成');\n            const authXml = '<?xml version=\"1.0\" encoding=\"utf-8\"?>' + builder.buildObject(authReqObj);\n            console.log('AuthReq XML:', authXml);\n            const authRes = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(ZEUS_ENDPOINT, authXml, {\n                headers: {\n                    'Content-Type': 'application/xml'\n                }\n            });\n            const authParsed = await (0,xml2js__WEBPACK_IMPORTED_MODULE_1__.parseStringPromise)(authRes.data);\n            console.log('AuthRes結果:', authParsed);\n            if (!authParsed.response?.result?.[0]?.status?.[0] || authParsed.response.result[0].status[0] !== 'success') {\n                console.error('認証失敗:', authParsed.response?.result?.[0]);\n                return res.status(400).json({\n                    error: '認証失敗',\n                    code: authParsed.response?.result?.[0]?.code?.[0] || 'unknown'\n                });\n            }\n            // 2. PayReq - 決済実行\n            const payReqObj = {\n                request: {\n                    $: {\n                        service: 'secure_link_3d',\n                        action: 'payment'\n                    },\n                    authentication: [\n                        {\n                            clientip: clientIp,\n                            key: apiKey\n                        }\n                    ],\n                    xid: [\n                        MD\n                    ],\n                    print_am: [\n                        'yes'\n                    ],\n                    print_addition_value: [\n                        'yes'\n                    ]\n                }\n            };\n            console.log('PayReq作成');\n            const payXml = '<?xml version=\"1.0\" encoding=\"utf-8\"?>' + builder.buildObject(payReqObj);\n            console.log('PayReq XML:', payXml);\n            const payRes = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(ZEUS_ENDPOINT, payXml, {\n                headers: {\n                    'Content-Type': 'application/xml'\n                }\n            });\n            const payParsed = await (0,xml2js__WEBPACK_IMPORTED_MODULE_1__.parseStringPromise)(payRes.data);\n            console.log('PayRes結果:', payParsed);\n            if (!payParsed.response?.result?.[0]?.status?.[0] || payParsed.response.result[0].status[0] !== 'success') {\n                console.error('決済失敗:', payParsed.response?.result?.[0]);\n                // エラーメッセージをマッピングする関数\n                const getErrorMessage = (code)=>{\n                    const errorMessages = {\n                        'errd001005': 'カード情報が正しくないか、このカードでは決済できません。',\n                        'errd001006': '残高不足または限度額超過です。',\n                        'errd001008': 'カード有効期限切れです。',\n                        'errd001009': '不正なカード番号です。',\n                        'errd001010': 'このカードは利用できません。',\n                        'errm001001': '3Dセキュア認証に失敗しました。',\n                        'default': '決済処理中にエラーが発生しました。'\n                    };\n                    return errorMessages[code] || errorMessages.default;\n                };\n                // エラー情報を含む決済結果を保存\n                const paymentId = (0,_lib_payment_db__WEBPACK_IMPORTED_MODULE_2__.generatePaymentId)();\n                const errorCode = payParsed.response?.result?.[0]?.code?.[0] || 'unknown';\n                const paymentData = {\n                    status: 'failed',\n                    error_code: errorCode,\n                    error_message: getErrorMessage(errorCode),\n                    transaction_id: payParsed.response?.order_number?.[0] || '-',\n                    amount: req.body.amount || '不明',\n                    timestamp: new Date().toISOString()\n                };\n                (0,_lib_payment_db__WEBPACK_IMPORTED_MODULE_2__.savePaymentResult)(paymentId, paymentData);\n                // エラー結果も決済結果確認画面で表示するため、同じ形式でリダイレクト\n                return res.status(200).json({\n                    status: 'failed',\n                    payment_id: paymentId,\n                    redirect_url: `/payment-result?payment_id=${paymentId}`\n                });\n            }\n            // 決済成功時、結果を保存してIDを返す\n            const paymentId = (0,_lib_payment_db__WEBPACK_IMPORTED_MODULE_2__.generatePaymentId)();\n            const paymentData = {\n                status: 'success',\n                order_number: payParsed.response.order_number?.[0],\n                amount: req.body.amount || '不明',\n                card: {\n                    number: {\n                        prefix: payParsed.response.card?.[0]?.number?.[0]?.prefix?.[0] || '**',\n                        suffix: payParsed.response.card?.[0]?.number?.[0]?.suffix?.[0] || '****'\n                    }\n                },\n                am_data: {\n                    syonin: payParsed.response.am_data?.[0]?.syonin?.[0],\n                    denpyo: payParsed.response.am_data?.[0]?.denpyo?.[0]\n                }\n            };\n            (0,_lib_payment_db__WEBPACK_IMPORTED_MODULE_2__.savePaymentResult)(paymentId, paymentData);\n            // 成功レスポンス（payment_idを含める）\n            return res.status(200).json({\n                status: 'success',\n                payment_id: paymentId,\n                redirect_url: `/payment-result?payment_id=${paymentId}`\n            });\n        }\n        // 以前のstepベースのコード（互換性のために残しておく場合）\n        console.error('無効なリクエスト形式');\n        return res.status(400).json({\n            error: 'MDとPaResが必要です'\n        });\n    } catch (error) {\n        console.error('処理エラー:', error);\n        return res.status(500).json({\n            error: '内部サーバーエラー',\n            message: error.message || '不明なエラー'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9wYXltZW50LXJlc3VsdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLDhCQUE4QjtBQUM5QkEsb0RBQXdCO0FBQ0U7QUFDMkI7QUFDdUI7QUFFNUUsTUFBTU8sZ0JBQWdCO0FBQ3RCLE1BQU1DLFVBQVUsSUFBSUwsMkNBQU9BLENBQUM7SUFBRU0sVUFBVTtBQUFLO0FBRTlCLGVBQWVDLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1Q0MsUUFBUUMsR0FBRyxDQUFDLGFBQWFILElBQUlJLElBQUk7SUFDakMsbUJBQW1CO0lBQ25CLE1BQU1DLFdBQVdDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxJQUFJO0lBQy9DLE1BQU1DLFNBQVNILFFBQVFDLEdBQUcsQ0FBQ0csUUFBUSxJQUFJO0lBRXZDLElBQUk7UUFDRiwwQ0FBMEM7UUFDMUMsTUFBTSxFQUFFQyxFQUFFLEVBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFFLEdBQUdiLElBQUlJLElBQUk7UUFFdENGLFFBQVFDLEdBQUcsQ0FBQyxPQUFPUTtRQUNuQlQsUUFBUUMsR0FBRyxDQUFDLFVBQVVTO1FBQ3RCVixRQUFRQyxHQUFHLENBQUMsV0FBV1U7UUFFdkIsMkNBQTJDO1FBQzNDLElBQUlGLE1BQU1DLE9BQU87WUFDZlYsUUFBUUMsR0FBRyxDQUFDO1lBRVosc0JBQXNCO1lBQ3RCLE1BQU1XLGFBQWE7Z0JBQ2pCQyxTQUFTO29CQUNQQyxHQUFHO3dCQUFFQyxTQUFTO3dCQUFrQkMsUUFBUTtvQkFBaUI7b0JBQ3pEQyxnQkFBZ0I7d0JBQ2Q7NEJBQ0VDLFVBQVVmOzRCQUNWZ0IsS0FBS1o7d0JBQ1A7cUJBQ0Q7b0JBQ0RhLEtBQUs7d0JBQUNYO3FCQUFHO29CQUNUQyxPQUFPO3dCQUFDQTtxQkFBTTtnQkFDaEI7WUFDRjtZQUVBVixRQUFRQyxHQUFHLENBQUM7WUFDWixNQUFNb0IsVUFBVSwyQ0FBMkMxQixRQUFRMkIsV0FBVyxDQUFDVjtZQUMvRVosUUFBUUMsR0FB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QixJQUFJWSxNQUFNLENBQUMsS0FBS29CLElBQUksQ0FBQztZQUFFRCxPQUFPO1FBQWdCO0lBQ3ZELEVBQUUsT0FBT0EsT0FBTztRQUNkOUIsUUFBUThCLEtBQUssQ0FBQyxVQUFVQTtRQUN4QixPQUFPL0IsSUFBSVksTUFBTSxDQUFDLEtBQUtvQixJQUFJLENBQUM7WUFDMUJELE9BQU87WUFDUGdDLFNBQVNoQyxNQUFNZ0MsT0FBTyxJQUFJO1FBQzVCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2thaWZ1amlzaGltYS93b3Jrc3BhY2VzL3Bzai16ZXVzLWJhc2VkLW8zL215LXpldXMtYXBwL3BhZ2VzL2FwaS9wYXltZW50LXJlc3VsdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9hcGkvcGF5bWVudC1yZXN1bHQuanNcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IEJ1aWxkZXIsIHBhcnNlU3RyaW5nUHJvbWlzZSB9IGZyb20gJ3htbDJqcyc7XG5pbXBvcnQgeyBzYXZlUGF5bWVudFJlc3VsdCwgZ2VuZXJhdGVQYXltZW50SWQgfSBmcm9tICcuLi8uLi9saWIvcGF5bWVudC1kYic7XG5cbmNvbnN0IFpFVVNfRU5EUE9JTlQgPSAnaHR0cHM6Ly9saW5rcHQuY2FyZHNlcnZpY2UuY28uanAvY2dpLWJpbi9zZWN1cmUvYXBpLmNnaSc7XG5jb25zdCBidWlsZGVyID0gbmV3IEJ1aWxkZXIoeyBoZWFkbGVzczogdHJ1ZSB9KTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBjb25zb2xlLmxvZygn44Oq44Kv44Ko44K544OI44Oc44OH44KjOicsIHJlcS5ib2R5KTtcbiAgLy8g55Kw5aKD5aSJ5pWw44G+44Gf44Gv44OH44OV44Kp44Or44OI5YCk44KS5L2/55SoXG4gIGNvbnN0IGNsaWVudElwID0gcHJvY2Vzcy5lbnYuWkVVU19DTElFTlRfSVAgfHwgJzIwMTkwMDIxNzUnO1xuICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5aRVVTX0tFWSB8fCAnMTFkYTgzZjZlN2FiODAzMDIwZTc0YmUzMDBhZDM3NjFkNTVmN2Y3NCc7XG4gIFxuICB0cnkge1xuICAgIC8vIHpldXNfdG9rZW4yLmpz44GL44KJ44Gu44Kz44O844Or44OQ44OD44KvIC0gTUTjgahQYVJlc+OCkuebtOaOpeWPluW+l1xuICAgIGNvbnN0IHsgTUQsIFBhUmVzLCBzdGF0dXMgfSA9IHJlcS5ib2R5O1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdNRDonLCBNRCk7XG4gICAgY29uc29sZS5sb2coJ1BhUmVzOicsIFBhUmVzKTtcbiAgICBjb25zb2xlLmxvZygnc3RhdHVzOicsIHN0YXR1cyk7XG4gICAgXG4gICAgLy8gTUTjgahQYVJlc+OBjOWtmOWcqOOBmeOCi+WgtOWQiO+8iHpldXNfdG9rZW4yLmpz44GL44KJ44Gu44Kz44O844Or44OQ44OD44Kv77yJXG4gICAgaWYgKE1EICYmIFBhUmVzKSB7XG4gICAgICBjb25zb2xlLmxvZygnemV1c190b2tlbjIuanPjgYvjgonjga7jgrPjg7zjg6vjg5Djg4Pjgq/jgpLlh6bnkIYnKTtcbiAgICAgIFxuICAgICAgLy8gMS4gQXV0aFJlcSAtIOiqjeiovOe1kOaenOeiuuiqjVxuICAgICAgY29uc3QgYXV0aFJlcU9iaiA9IHtcbiAgICAgICAgcmVxdWVzdDoge1xuICAgICAgICAgICQ6IHsgc2VydmljZTogJ3NlY3VyZV9saW5rXzNkJywgYWN0aW9uOiAnYXV0aGVudGljYXRpb24nIH0sXG4gICAgICAgICAgYXV0aGVudGljYXRpb246IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xpZW50aXA6IGNsaWVudElwLFxuICAgICAgICAgICAgICBrZXk6IGFwaUtleVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgeGlkOiBbTURdLFxuICAgICAgICAgIFBhUmVzOiBbUGFSZXNdXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoUmVx5L2c5oiQJyk7XG4gICAgICBjb25zdCBhdXRoWG1sID0gJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cInV0Zi04XCI/PicgKyBidWlsZGVyLmJ1aWxkT2JqZWN0KGF1dGhSZXFPYmopO1xuICAgICAgY29uc29sZS5sb2coJ0F1dGhSZXEgWE1MOicsIGF1dGhYbWwpO1xuICAgICAgXG4gICAgICBjb25zdCBhdXRoUmVzID0gYXdhaXQgYXhpb3MucG9zdChaRVVTX0VORFBPSU5ULCBhdXRoWG1sLCB7XG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94bWwnIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBhdXRoUGFyc2VkID0gYXdhaXQgcGFyc2VTdHJpbmdQcm9taXNlKGF1dGhSZXMuZGF0YSk7XG4gICAgICBjb25zb2xlLmxvZygnQXV0aFJlc+e1kOaenDonLCBhdXRoUGFyc2VkKTtcbiAgICAgIFxuICAgICAgaWYgKCFhdXRoUGFyc2VkLnJlc3BvbnNlPy5yZXN1bHQ/LlswXT8uc3RhdHVzPy5bMF0gfHwgXG4gICAgICAgICAgYXV0aFBhcnNlZC5yZXNwb25zZS5yZXN1bHRbMF0uc3RhdHVzWzBdICE9PSAnc3VjY2VzcycpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign6KqN6Ki85aSx5pWXOicsIGF1dGhQYXJzZWQucmVzcG9uc2U/LnJlc3VsdD8uWzBdKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgICAgZXJyb3I6ICfoqo3oqLzlpLHmlZcnLCBcbiAgICAgICAgICBjb2RlOiBhdXRoUGFyc2VkLnJlc3BvbnNlPy5yZXN1bHQ/LlswXT8uY29kZT8uWzBdIHx8ICd1bmtub3duJyBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIDIuIFBheVJlcSAtIOaxuua4iOWun+ihjFxuICAgICAgY29uc3QgcGF5UmVxT2JqID0ge1xuICAgICAgICByZXF1ZXN0OiB7XG4gICAgICAgICAgJDogeyBzZXJ2aWNlOiAnc2VjdXJlX2xpbmtfM2QnLCBhY3Rpb246ICdwYXltZW50JyB9LFxuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsaWVudGlwOiBjbGllbnRJcCxcbiAgICAgICAgICAgICAga2V5OiBhcGlLZXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHhpZDogW01EXSxcbiAgICAgICAgICBwcmludF9hbTogWyd5ZXMnXSxcbiAgICAgICAgICBwcmludF9hZGRpdGlvbl92YWx1ZTogWyd5ZXMnXVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnUGF5UmVx5L2c5oiQJyk7XG4gICAgICBjb25zdCBwYXlYbWwgPSAnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwidXRmLThcIj8+JyArIGJ1aWxkZXIuYnVpbGRPYmplY3QocGF5UmVxT2JqKTtcbiAgICAgIGNvbnNvbGUubG9nKCdQYXlSZXEgWE1MOicsIHBheVhtbCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHBheVJlcyA9IGF3YWl0IGF4aW9zLnBvc3QoWkVVU19FTkRQT0lOVCwgcGF5WG1sLCB7XG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94bWwnIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBwYXlQYXJzZWQgPSBhd2FpdCBwYXJzZVN0cmluZ1Byb21pc2UocGF5UmVzLmRhdGEpO1xuICAgICAgY29uc29sZS5sb2coJ1BheVJlc+e1kOaenDonLCBwYXlQYXJzZWQpO1xuICAgICAgXG4gICAgICBpZiAoIXBheVBhcnNlZC5yZXNwb25zZT8ucmVzdWx0Py5bMF0/LnN0YXR1cz8uWzBdIHx8IFxuICAgICAgICAgIHBheVBhcnNlZC5yZXNwb25zZS5yZXN1bHRbMF0uc3RhdHVzWzBdICE9PSAnc3VjY2VzcycpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign5rG65riI5aSx5pWXOicsIHBheVBhcnNlZC5yZXNwb25zZT8ucmVzdWx0Py5bMF0pO1xuICAgICAgICBcbiAgICAgICAgLy8g44Ko44Op44O844Oh44OD44K744O844K444KS44Oe44OD44OU44Oz44Kw44GZ44KL6Zai5pWwXG4gICAgICAgIGNvbnN0IGdldEVycm9yTWVzc2FnZSA9IChjb2RlKSA9PiB7XG4gICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlcyA9IHtcbiAgICAgICAgICAgICdlcnJkMDAxMDA1JzogJ+OCq+ODvOODieaDheWgseOBjOato+OBl+OBj+OBquOBhOOBi+OAgeOBk+OBruOCq+ODvOODieOBp+OBr+axuua4iOOBp+OBjeOBvuOBm+OCk+OAgicsXG4gICAgICAgICAgICAnZXJyZDAwMTAwNic6ICfmrovpq5jkuI3otrPjgb7jgZ/jga/pmZDluqbpoY3otoXpgY7jgafjgZnjgIInLFxuICAgICAgICAgICAgJ2VycmQwMDEwMDgnOiAn44Kr44O844OJ5pyJ5Yq55pyf6ZmQ5YiH44KM44Gn44GZ44CCJyxcbiAgICAgICAgICAgICdlcnJkMDAxMDA5JzogJ+S4jeato+OBquOCq+ODvOODieeVquWPt+OBp+OBmeOAgicsXG4gICAgICAgICAgICAnZXJyZDAwMTAxMCc6ICfjgZPjga7jgqvjg7zjg4njga/liKnnlKjjgafjgY3jgb7jgZvjgpPjgIInLFxuICAgICAgICAgICAgJ2Vycm0wMDEwMDEnOiAnM0Tjgrvjgq3jg6XjgqLoqo3oqLzjgavlpLHmlZfjgZfjgb7jgZfjgZ/jgIInLFxuICAgICAgICAgICAgJ2RlZmF1bHQnOiAn5rG65riI5Yem55CG5Lit44Gr44Ko44Op44O844GM55m655Sf44GX44G+44GX44Gf44CCJ1xuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIGVycm9yTWVzc2FnZXNbY29kZV0gfHwgZXJyb3JNZXNzYWdlcy5kZWZhdWx0O1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8g44Ko44Op44O85oOF5aCx44KS5ZCr44KA5rG65riI57WQ5p6c44KS5L+d5a2YXG4gICAgICAgIGNvbnN0IHBheW1lbnRJZCA9IGdlbmVyYXRlUGF5bWVudElkKCk7XG4gICAgICAgIGNvbnN0IGVycm9yQ29kZSA9IHBheVBhcnNlZC5yZXNwb25zZT8ucmVzdWx0Py5bMF0/LmNvZGU/LlswXSB8fCAndW5rbm93bic7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0ge1xuICAgICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsIC8vIHN1Y2Nlc3Mg44Gn44Gv44Gq44GPIGZhaWxlZFxuICAgICAgICAgIGVycm9yX2NvZGU6IGVycm9yQ29kZSxcbiAgICAgICAgICBlcnJvcl9tZXNzYWdlOiBnZXRFcnJvck1lc3NhZ2UoZXJyb3JDb2RlKSxcbiAgICAgICAgICB0cmFuc2FjdGlvbl9pZDogcGF5UGFyc2VkLnJlc3BvbnNlPy5vcmRlcl9udW1iZXI/LlswXSB8fCAnLScsXG4gICAgICAgICAgYW1vdW50OiByZXEuYm9keS5hbW91bnQgfHwgJ+S4jeaYjicsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHNhdmVQYXltZW50UmVzdWx0KHBheW1lbnRJZCwgcGF5bWVudERhdGEpO1xuICAgICAgICBcbiAgICAgICAgLy8g44Ko44Op44O857WQ5p6c44KC5rG65riI57WQ5p6c56K66KqN55S76Z2i44Gn6KGo56S644GZ44KL44Gf44KB44CB5ZCM44GY5b2i5byP44Gn44Oq44OA44Kk44Os44Kv44OIXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcbiAgICAgICAgICBwYXltZW50X2lkOiBwYXltZW50SWQsXG4gICAgICAgICAgcmVkaXJlY3RfdXJsOiBgL3BheW1lbnQtcmVzdWx0P3BheW1lbnRfaWQ9JHtwYXltZW50SWR9YFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8g5rG65riI5oiQ5Yqf5pmC44CB57WQ5p6c44KS5L+d5a2Y44GX44GmSUTjgpLov5TjgZlcbiAgICAgIGNvbnN0IHBheW1lbnRJZCA9IGdlbmVyYXRlUGF5bWVudElkKCk7XG4gICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIG9yZGVyX251bWJlcjogcGF5UGFyc2VkLnJlc3BvbnNlLm9yZGVyX251bWJlcj8uWzBdLFxuICAgICAgICBhbW91bnQ6IHJlcS5ib2R5LmFtb3VudCB8fCAn5LiN5piOJyxcbiAgICAgICAgY2FyZDoge1xuICAgICAgICAgIG51bWJlcjoge1xuICAgICAgICAgICAgcHJlZml4OiBwYXlQYXJzZWQucmVzcG9uc2UuY2FyZD8uWzBdPy5udW1iZXI/LlswXT8ucHJlZml4Py5bMF0gfHwgJyoqJyxcbiAgICAgICAgICAgIHN1ZmZpeDogcGF5UGFyc2VkLnJlc3BvbnNlLmNhcmQ/LlswXT8ubnVtYmVyPy5bMF0/LnN1ZmZpeD8uWzBdIHx8ICcqKioqJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYW1fZGF0YToge1xuICAgICAgICAgIHN5b25pbjogcGF5UGFyc2VkLnJlc3BvbnNlLmFtX2RhdGE/LlswXT8uc3lvbmluPy5bMF0sXG4gICAgICAgICAgZGVucHlvOiBwYXlQYXJzZWQucmVzcG9uc2UuYW1fZGF0YT8uWzBdPy5kZW5weW8/LlswXVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBzYXZlUGF5bWVudFJlc3VsdChwYXltZW50SWQsIHBheW1lbnREYXRhKTtcblxuICAgICAgLy8g5oiQ5Yqf44Os44K544Od44Oz44K577yIcGF5bWVudF9pZOOCkuWQq+OCgeOCi++8iVxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIHBheW1lbnRfaWQ6IHBheW1lbnRJZCxcbiAgICAgICAgcmVkaXJlY3RfdXJsOiBgL3BheW1lbnQtcmVzdWx0P3BheW1lbnRfaWQ9JHtwYXltZW50SWR9YFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIOS7peWJjeOBrnN0ZXDjg5njg7zjgrnjga7jgrPjg7zjg4nvvIjkupLmj5vmgKfjga7jgZ/jgoHjgavmrovjgZfjgabjgYrjgY/loLTlkIjvvIlcbiAgICBjb25zb2xlLmVycm9yKCfnhKHlirnjgarjg6rjgq/jgqjjgrnjg4jlvaLlvI8nKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ01E44GoUGFSZXPjgYzlv4XopoHjgafjgZknIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+WHpueQhuOCqOODqeODvDonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICBlcnJvcjogJ+WGhemDqOOCteODvOODkOODvOOCqOODqeODvCcsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8ICfkuI3mmI7jgarjgqjjg6njg7wnIFxuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImF4aW9zIiwiQnVpbGRlciIsInBhcnNlU3RyaW5nUHJvbWlzZSIsInNhdmVQYXltZW50UmVzdWx0IiwiZ2VuZXJhdGVQYXltZW50SWQiLCJaRVVTX0VORFBPSU5UIiwiYnVpbGRlciIsImhlYWRsZXNzIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJib2R5IiwiY2xpZW50SXAiLCJwcm9jZXNzIiwiZW52IiwiWkVVU19DTElFTlRfSVAiLCJhcGlLZXkiLCJaRVVTX0tFWSIsIk1EIiwiUGFSZXMiLCJzdGF0dXMiLCJhdXRoUmVxT2JqIiwicmVxdWVzdCIsIiQiLCJzZXJ2aWNlIiwiYWN0aW9uIiwiYXV0aGVudGljYXRpb24iLCJjbGllbnRpcCIsImtleSIsInhpZCIsImF1dGhYbWwiLCJidWlsZE9iamVjdCIsImF1dGhSZXMiLCJwb3N0IiwiaGVhZGVycyIsImF1dGhQYXJzZWQiLCJkYXRhIiwicmVzcG9uc2UiLCJyZXN1bHQiLCJlcnJvciIsImpzb24iLCJjb2RlIiwicGF5UmVxT2JqIiwicHJpbnRfYW0iLCJwcmludF9hZGRpdGlvbl92YWx1ZSIsInBheVhtbCIsInBheVJlcyIsInBheVBhcnNlZCIsImdldEVycm9yTWVzc2FnZSIsImVycm9yTWVzc2FnZXMiLCJkZWZhdWx0IiwicGF5bWVudElkIiwiZXJyb3JDb2RlIiwicGF5bWVudERhdGEiLCJlcnJvcl9jb2RlIiwiZXJyb3JfbWVzc2FnZSIsInRyYW5zYWN0aW9uX2lkIiwib3JkZXJfbnVtYmVyIiwiYW1vdW50IiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicGF5bWVudF9pZCIsInJlZGlyZWN0X3VybCIsImNhcmQiLCJudW1iZXIiLCJwcmVmaXgiLCJzdWZmaXgiLCJhbV9kYXRhIiwic3lvbmluIiwiZGVucHlvIiwibWVzc2FnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/payment-result.js\n");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "xml2js":
/*!*************************!*\
  !*** external "xml2js" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("xml2js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpayment-result&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpayment-result.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();