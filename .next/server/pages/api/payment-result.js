"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/payment-result";
exports.ids = ["pages/api/payment-result"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpayment-result&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpayment-result.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpayment-result&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpayment-result.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/payment-result.js */ \"(api-node)/./pages/api/payment-result.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/payment-result\",\n        pathname: \"/api/payment-result\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_payment_result_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGcGF5bWVudC1yZXN1bHQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnBheW1lbnQtcmVzdWx0LmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx5REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMseURBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvcGF5bWVudC1yZXN1bHQuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3BheW1lbnQtcmVzdWx0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcGF5bWVudC1yZXN1bHRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpayment-result&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpayment-result.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/payment-result.js":
/*!*************************************!*\
  !*** ./pages/api/payment-result.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var xml2js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! xml2js */ \"xml2js\");\n/* harmony import */ var xml2js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(xml2js__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// pages/api/payment-result.js\n(__webpack_require__(/*! dotenv */ \"dotenv\").config)();\n\n\n// import { savePaymentResult, generatePaymentId } from '../../lib/payment-db';\nconst ZEUS_ENDPOINT = 'https://linkpt.cardservice.co.jp/cgi-bin/secure/api.cgi';\nconst builder = new xml2js__WEBPACK_IMPORTED_MODULE_1__.Builder({\n    headless: true\n});\n// 簡易的なID生成関数（payment-db.jsの代わり）\nconst generateSimpleId = ()=>`payment_${Date.now()}_${Math.random().toString(36).substring(2, 7)}`;\nasync function handler(req, res) {\n    console.log('リクエストボディ:', req.body);\n    // 環境変数またはデフォルト値を使用\n    const clientIp = process.env.ZEUS_CLIENT_IP || '2019002175';\n    const apiKey = process.env.ZEUS_KEY || '11da83f6e7ab803020e74be300ad3761d55f7f74';\n    try {\n        // zeus_token2.jsからのコールバック - MDとPaResを直接取得\n        const { MD, PaRes, status } = req.body;\n        console.log('MD:', MD);\n        console.log('PaRes:', PaRes);\n        console.log('status:', status);\n        // MDとPaResが存在する場合（zeus_token2.jsからのコールバック）\n        if (MD && PaRes) {\n            console.log('zeus_token2.jsからのコールバックを処理');\n            // 1. AuthReq - 認証結果確認\n            const authReqObj = {\n                request: {\n                    $: {\n                        service: 'secure_link_3d',\n                        action: 'authentication'\n                    },\n                    authentication: [\n                        {\n                            clientip: clientIp,\n                            key: apiKey\n                        }\n                    ],\n                    xid: [\n                        MD\n                    ],\n                    PaRes: [\n                        PaRes\n                    ]\n                }\n            };\n            console.log('AuthReq作成');\n            const authXml = '<?xml version=\"1.0\" encoding=\"utf-8\"?>' + builder.buildObject(authReqObj);\n            console.log('AuthReq XML:', authXml);\n            const authRes = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(ZEUS_ENDPOINT, authXml, {\n                headers: {\n                    'Content-Type': 'application/xml'\n                }\n            });\n            const authParsed = await (0,xml2js__WEBPACK_IMPORTED_MODULE_1__.parseStringPromise)(authRes.data);\n            console.log('AuthRes結果:', authParsed);\n            if (!authParsed.response?.result?.[0]?.status?.[0] || authParsed.response.result[0].status[0] !== 'success') {\n                console.error('認証失敗:', authParsed.response?.result?.[0]);\n                return res.status(400).json({\n                    error: '認証失敗',\n                    code: authParsed.response?.result?.[0]?.code?.[0] || 'unknown'\n                });\n            }\n            // 2. PayReq - 決済実行\n            const payReqObj = {\n                request: {\n                    $: {\n                        service: 'secure_link_3d',\n                        action: 'payment'\n                    },\n                    authentication: [\n                        {\n                            clientip: clientIp,\n                            key: apiKey\n                        }\n                    ],\n                    xid: [\n                        MD\n                    ],\n                    print_am: [\n                        'yes'\n                    ],\n                    print_addition_value: [\n                        'yes'\n                    ]\n                }\n            };\n            console.log('PayReq作成');\n            const payXml = '<?xml version=\"1.0\" encoding=\"utf-8\"?>' + builder.buildObject(payReqObj);\n            console.log('PayReq XML:', payXml);\n            const payRes = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(ZEUS_ENDPOINT, payXml, {\n                headers: {\n                    'Content-Type': 'application/xml'\n                }\n            });\n            const payParsed = await (0,xml2js__WEBPACK_IMPORTED_MODULE_1__.parseStringPromise)(payRes.data);\n            console.log('PayRes結果:', payParsed);\n            if (!payParsed.response?.result?.[0]?.status?.[0] || payParsed.response.result[0].status[0] !== 'success') {\n                console.error('決済失敗:', payParsed.response?.result?.[0]);\n                // エラーメッセージをマッピングする関数\n                const getErrorMessage = (code)=>{\n                    const errorMessages = {\n                        'errd001005': 'カード情報が正しくないか、このカードでは決済できません。',\n                        'errd001006': '残高不足または限度額超過です。',\n                        'errd001008': 'カード有効期限切れです。',\n                        'errd001009': '不正なカード番号です。',\n                        'errd001010': 'このカードは利用できません。',\n                        'errm001001': '3Dセキュア認証に失敗しました。',\n                        'default': '決済処理中にエラーが発生しました。'\n                    };\n                    return errorMessages[code] || errorMessages.default;\n                };\n                // エラー情報を含む決済結果を保存\n                // const paymentId = generatePaymentId(); // 削除されたfunction\n                const paymentId = generateSimpleId(); // 代替関数を使用\n                const errorCode = payParsed.response?.result?.[0]?.code?.[0] || 'unknown';\n                const paymentData = {\n                    status: 'failed',\n                    error_code: errorCode,\n                    error_message: getErrorMessage(errorCode),\n                    transaction_id: payParsed.response?.order_number?.[0] || '-',\n                    amount: req.body.amount || '不明',\n                    timestamp: new Date().toISOString()\n                };\n                // savePaymentResult(paymentId, paymentData);\n                console.log('決済情報を保存しました:', {\n                    paymentId,\n                    paymentData\n                });\n                // エラー結果も決済結果確認画面で表示するため、同じ形式でリダイレクト\n                return res.status(200).json({\n                    status: 'failed',\n                    payment_id: paymentId,\n                    redirect_url: `/payment-result?payment_id=${paymentId}`\n                });\n            }\n            // 決済成功時、結果を保存してIDを返す\n            // const paymentId = generatePaymentId(); // 削除されたfunction\n            const paymentId = generateSimpleId(); // 代替関数を使用\n            const paymentData = {\n                status: 'success',\n                order_number: payParsed.response.order_number?.[0],\n                amount: req.body.amount || '不明',\n                card: {\n                    number: {\n                        prefix: payParsed.response.card?.[0]?.number?.[0]?.prefix?.[0] || '**',\n                        suffix: payParsed.response.card?.[0]?.number?.[0]?.suffix?.[0] || '****'\n                    }\n                },\n                am_data: {\n                    syonin: payParsed.response.am_data?.[0]?.syonin?.[0],\n                    denpyo: payParsed.response.am_data?.[0]?.denpyo?.[0]\n                }\n            };\n            // savePaymentResult(paymentId, paymentData);\n            console.log('決済情報を保存しました:', {\n                paymentId,\n                paymentData\n            });\n            // 成功レスポンス（payment_idを含める）\n            return res.status(200).json({\n                status: 'success',\n                payment_id: paymentId,\n                redirect_url: `/payment-result?payment_id=${paymentId}`\n            });\n        }\n        // 以前のstepベースのコード（互換性のために残しておく場合）\n        console.error('無効なリクエスト形式');\n        return res.status(400).json({\n            error: 'MDとPaResが必要です'\n        });\n    } catch (error) {\n        console.error('処理エラー:', error);\n        return res.status(500).json({\n            error: '内部サーバーエラー',\n            message: error.message || '不明なエラー'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDRjtZQUVBLDZDQUE2QztZQUM3QzVELFFBQVFDLEdBQUcsQ0FBQyxnQkFBZ0I7Z0JBQUV5QztnQkFBV0U7WUFBWTtZQUVyRCwwQkFBMEI7WUFDMUIsT0FBTzdDLElBQUlZLE1BQU0sQ0FBQyxLQUFLb0IsSUFBSSxDQUFDO2dCQUMxQnBCLFFBQVE7Z0JBQ1J5QyxZQUFZVjtnQkFDWlcsY0FBYyxDQUFDLDJCQUEyQixFQUFFWCxXQUFXO1lBQ3pEO1FBQ0Y7UUFFQSxpQ0FBaUM7UUFDakMxQyxRQUFROEIsS0FBSyxDQUFDO1FBQ2QsT0FBTy9CLElBQUlZLE1BQU0sQ0FBQyxLQUFLb0IsSUFBSSxDQUFDO1lBQUVELE9BQU87UUFBZ0I7SUFDdkQsRUFBRSxPQUFPQSxPQUFPO1FBQ2Q5QixRQUFROEIsS0FBSyxDQUFDLFVBQVVBO1FBQ3hCLE9BQU8vQixJQUFJWSxNQUFNLENBQUMsS0FBS29CLElBQUksQ0FBQztZQUMxQkQsT0FBTztZQUNQK0IsU0FBUy9CLE1BQU0rQixPQUFPLElBQUk7UUFDNUI7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMva2FpZnVqaXNoaW1hL3dvcmtzcGFjZXMvcHNqLXpldXMtYmFzZWQtbzMvbXktemV1cy1hcHAvcGFnZXMvYXBpL3BheW1lbnQtcmVzdWx0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS9wYXltZW50LXJlc3VsdC5qc1xucmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgQnVpbGRlciwgcGFyc2VTdHJpbmdQcm9taXNlIH0gZnJvbSAneG1sMmpzJztcbi8vIGltcG9ydCB7IHNhdmVQYXltZW50UmVzdWx0LCBnZW5lcmF0ZVBheW1lbnRJZCB9IGZyb20gJy4uLy4uL2xpYi9wYXltZW50LWRiJztcblxuY29uc3QgWkVVU19FTkRQT0lOVCA9ICdodHRwczovL2xpbmtwdC5jYXJkc2VydmljZS5jby5qcC9jZ2ktYmluL3NlY3VyZS9hcGkuY2dpJztcbmNvbnN0IGJ1aWxkZXIgPSBuZXcgQnVpbGRlcih7IGhlYWRsZXNzOiB0cnVlIH0pO1xuXG4vLyDnsKHmmJPnmoTjgapJROeUn+aIkOmWouaVsO+8iHBheW1lbnQtZGIuanPjga7ku6Pjgo/jgorvvIlcbmNvbnN0IGdlbmVyYXRlU2ltcGxlSWQgPSAoKSA9PiBgcGF5bWVudF8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDcpfWA7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgY29uc29sZS5sb2coJ+ODquOCr+OCqOOCueODiOODnOODh+OCozonLCByZXEuYm9keSk7XG4gIC8vIOeSsOWig+WkieaVsOOBvuOBn+OBr+ODh+ODleOCqeODq+ODiOWApOOCkuS9v+eUqFxuICBjb25zdCBjbGllbnRJcCA9IHByb2Nlc3MuZW52LlpFVVNfQ0xJRU5UX0lQIHx8ICcyMDE5MDAyMTc1JztcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuWkVVU19LRVkgfHwgJzExZGE4M2Y2ZTdhYjgwMzAyMGU3NGJlMzAwYWQzNzYxZDU1ZjdmNzQnO1xuICBcbiAgdHJ5IHtcbiAgICAvLyB6ZXVzX3Rva2VuMi5qc+OBi+OCieOBruOCs+ODvOODq+ODkOODg+OCryAtIE1E44GoUGFSZXPjgpLnm7TmjqXlj5blvpdcbiAgICBjb25zdCB7IE1ELCBQYVJlcywgc3RhdHVzIH0gPSByZXEuYm9keTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnTUQ6JywgTUQpO1xuICAgIGNvbnNvbGUubG9nKCdQYVJlczonLCBQYVJlcyk7XG4gICAgY29uc29sZS5sb2coJ3N0YXR1czonLCBzdGF0dXMpO1xuICAgIFxuICAgIC8vIE1E44GoUGFSZXPjgYzlrZjlnKjjgZnjgovloLTlkIjvvIh6ZXVzX3Rva2VuMi5qc+OBi+OCieOBruOCs+ODvOODq+ODkOODg+OCr++8iVxuICAgIGlmIChNRCAmJiBQYVJlcykge1xuICAgICAgY29uc29sZS5sb2coJ3pldXNfdG9rZW4yLmpz44GL44KJ44Gu44Kz44O844Or44OQ44OD44Kv44KS5Yem55CGJyk7XG4gICAgICBcbiAgICAgIC8vIDEuIEF1dGhSZXEgLSDoqo3oqLzntZDmnpznorroqo1cbiAgICAgIGNvbnN0IGF1dGhSZXFPYmogPSB7XG4gICAgICAgIHJlcXVlc3Q6IHtcbiAgICAgICAgICAkOiB7IHNlcnZpY2U6ICdzZWN1cmVfbGlua18zZCcsIGFjdGlvbjogJ2F1dGhlbnRpY2F0aW9uJyB9LFxuICAgICAgICAgIGF1dGhlbnRpY2F0aW9uOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsaWVudGlwOiBjbGllbnRJcCxcbiAgICAgICAgICAgICAga2V5OiBhcGlLZXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHhpZDogW01EXSxcbiAgICAgICAgICBQYVJlczogW1BhUmVzXVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnQXV0aFJlceS9nOaIkCcpO1xuICAgICAgY29uc3QgYXV0aFhtbCA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJ1dGYtOFwiPz4nICsgYnVpbGRlci5idWlsZE9iamVjdChhdXRoUmVxT2JqKTtcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoUmVxIFhNTDonLCBhdXRoWG1sKTtcbiAgICAgIFxuICAgICAgY29uc3QgYXV0aFJlcyA9IGF3YWl0IGF4aW9zLnBvc3QoWkVVU19FTkRQT0lOVCwgYXV0aFhtbCwge1xuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veG1sJyB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgYXV0aFBhcnNlZCA9IGF3YWl0IHBhcnNlU3RyaW5nUHJvbWlzZShhdXRoUmVzLmRhdGEpO1xuICAgICAgY29uc29sZS5sb2coJ0F1dGhSZXPntZDmnpw6JywgYXV0aFBhcnNlZCk7XG4gICAgICBcbiAgICAgIGlmICghYXV0aFBhcnNlZC5yZXNwb25zZT8ucmVzdWx0Py5bMF0/LnN0YXR1cz8uWzBdIHx8IFxuICAgICAgICAgIGF1dGhQYXJzZWQucmVzcG9uc2UucmVzdWx0WzBdLnN0YXR1c1swXSAhPT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iqjeiovOWkseaVlzonLCBhdXRoUGFyc2VkLnJlc3BvbnNlPy5yZXN1bHQ/LlswXSk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICAgIGVycm9yOiAn6KqN6Ki85aSx5pWXJywgXG4gICAgICAgICAgY29kZTogYXV0aFBhcnNlZC5yZXNwb25zZT8ucmVzdWx0Py5bMF0/LmNvZGU/LlswXSB8fCAndW5rbm93bicgXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyAyLiBQYXlSZXEgLSDmsbrmuIjlrp/ooYxcbiAgICAgIGNvbnN0IHBheVJlcU9iaiA9IHtcbiAgICAgICAgcmVxdWVzdDoge1xuICAgICAgICAgICQ6IHsgc2VydmljZTogJ3NlY3VyZV9saW5rXzNkJywgYWN0aW9uOiAncGF5bWVudCcgfSxcbiAgICAgICAgICBhdXRoZW50aWNhdGlvbjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGllbnRpcDogY2xpZW50SXAsXG4gICAgICAgICAgICAgIGtleTogYXBpS2V5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICB4aWQ6IFtNRF0sXG4gICAgICAgICAgcHJpbnRfYW06IFsneWVzJ10sXG4gICAgICAgICAgcHJpbnRfYWRkaXRpb25fdmFsdWU6IFsneWVzJ11cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1BheVJlceS9nOaIkCcpO1xuICAgICAgY29uc3QgcGF5WG1sID0gJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cInV0Zi04XCI/PicgKyBidWlsZGVyLmJ1aWxkT2JqZWN0KHBheVJlcU9iaik7XG4gICAgICBjb25zb2xlLmxvZygnUGF5UmVxIFhNTDonLCBwYXlYbWwpO1xuICAgICAgXG4gICAgICBjb25zdCBwYXlSZXMgPSBhd2FpdCBheGlvcy5wb3N0KFpFVVNfRU5EUE9JTlQsIHBheVhtbCwge1xuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veG1sJyB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcGF5UGFyc2VkID0gYXdhaXQgcGFyc2VTdHJpbmdQcm9taXNlKHBheVJlcy5kYXRhKTtcbiAgICAgIGNvbnNvbGUubG9nKCdQYXlSZXPntZDmnpw6JywgcGF5UGFyc2VkKTtcbiAgICAgIFxuICAgICAgaWYgKCFwYXlQYXJzZWQucmVzcG9uc2U/LnJlc3VsdD8uWzBdPy5zdGF0dXM/LlswXSB8fCBcbiAgICAgICAgICBwYXlQYXJzZWQucmVzcG9uc2UucmVzdWx0WzBdLnN0YXR1c1swXSAhPT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+axuua4iOWkseaVlzonLCBwYXlQYXJzZWQucmVzcG9uc2U/LnJlc3VsdD8uWzBdKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOOCqOODqeODvOODoeODg+OCu+ODvOOCuOOCkuODnuODg+ODlOODs+OCsOOBmeOCi+mWouaVsFxuICAgICAgICBjb25zdCBnZXRFcnJvck1lc3NhZ2UgPSAoY29kZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZXMgPSB7XG4gICAgICAgICAgICAnZXJyZDAwMTAwNSc6ICfjgqvjg7zjg4nmg4XloLHjgYzmraPjgZfjgY/jgarjgYTjgYvjgIHjgZPjga7jgqvjg7zjg4njgafjga/msbrmuIjjgafjgY3jgb7jgZvjgpPjgIInLFxuICAgICAgICAgICAgJ2VycmQwMDEwMDYnOiAn5q6L6auY5LiN6Laz44G+44Gf44Gv6ZmQ5bqm6aGN6LaF6YGO44Gn44GZ44CCJyxcbiAgICAgICAgICAgICdlcnJkMDAxMDA4JzogJ+OCq+ODvOODieacieWKueacn+mZkOWIh+OCjOOBp+OBmeOAgicsXG4gICAgICAgICAgICAnZXJyZDAwMTAwOSc6ICfkuI3mraPjgarjgqvjg7zjg4nnlarlj7fjgafjgZnjgIInLFxuICAgICAgICAgICAgJ2VycmQwMDEwMTAnOiAn44GT44Gu44Kr44O844OJ44Gv5Yip55So44Gn44GN44G+44Gb44KT44CCJyxcbiAgICAgICAgICAgICdlcnJtMDAxMDAxJzogJzNE44K744Kt44Ol44Ki6KqN6Ki844Gr5aSx5pWX44GX44G+44GX44Gf44CCJyxcbiAgICAgICAgICAgICdkZWZhdWx0JzogJ+axuua4iOWHpueQhuS4reOBq+OCqOODqeODvOOBjOeZuueUn+OBl+OBvuOBl+OBn+OAgidcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBlcnJvck1lc3NhZ2VzW2NvZGVdIHx8IGVycm9yTWVzc2FnZXMuZGVmYXVsdDtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIOOCqOODqeODvOaDheWgseOCkuWQq+OCgOaxuua4iOe1kOaenOOCkuS/neWtmFxuICAgICAgICAvLyBjb25zdCBwYXltZW50SWQgPSBnZW5lcmF0ZVBheW1lbnRJZCgpOyAvLyDliYrpmaTjgZXjgozjgZ9mdW5jdGlvblxuICAgICAgICBjb25zdCBwYXltZW50SWQgPSBnZW5lcmF0ZVNpbXBsZUlkKCk7IC8vIOS7o+abv+mWouaVsOOCkuS9v+eUqFxuICAgICAgICBjb25zdCBlcnJvckNvZGUgPSBwYXlQYXJzZWQucmVzcG9uc2U/LnJlc3VsdD8uWzBdPy5jb2RlPy5bMF0gfHwgJ3Vua25vd24nO1xuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLCAvLyBzdWNjZXNzIOOBp+OBr+OBquOBjyBmYWlsZWRcbiAgICAgICAgICBlcnJvcl9jb2RlOiBlcnJvckNvZGUsXG4gICAgICAgICAgZXJyb3JfbWVzc2FnZTogZ2V0RXJyb3JNZXNzYWdlKGVycm9yQ29kZSksXG4gICAgICAgICAgdHJhbnNhY3Rpb25faWQ6IHBheVBhcnNlZC5yZXNwb25zZT8ub3JkZXJfbnVtYmVyPy5bMF0gfHwgJy0nLFxuICAgICAgICAgIGFtb3VudDogcmVxLmJvZHkuYW1vdW50IHx8ICfkuI3mmI4nLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBzYXZlUGF5bWVudFJlc3VsdChwYXltZW50SWQsIHBheW1lbnREYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ+axuua4iOaDheWgseOCkuS/neWtmOOBl+OBvuOBl+OBnzonLCB7IHBheW1lbnRJZCwgcGF5bWVudERhdGEgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyDjgqjjg6njg7zntZDmnpzjgoLmsbrmuIjntZDmnpznorroqo3nlLvpnaLjgafooajnpLrjgZnjgovjgZ/jgoHjgIHlkIzjgZjlvaLlvI/jgafjg6rjg4DjgqTjg6zjgq/jg4hcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICAgIHBheW1lbnRfaWQ6IHBheW1lbnRJZCxcbiAgICAgICAgICByZWRpcmVjdF91cmw6IGAvcGF5bWVudC1yZXN1bHQ/cGF5bWVudF9pZD0ke3BheW1lbnRJZH1gXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDmsbrmuIjmiJDlip/mmYLjgIHntZDmnpzjgpLkv53lrZjjgZfjgaZJROOCkui/lOOBmVxuICAgICAgLy8gY29uc3QgcGF5bWVudElkID0gZ2VuZXJhdGVQYXltZW50SWQoKTsgLy8g5YmK6Zmk44GV44KM44GfZnVuY3Rpb25cbiAgICAgIGNvbnN0IHBheW1lbnRJZCA9IGdlbmVyYXRlU2ltcGxlSWQoKTsgLy8g5Luj5pu/6Zai5pWw44KS5L2/55SoXG4gICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIG9yZGVyX251bWJlcjogcGF5UGFyc2VkLnJlc3BvbnNlLm9yZGVyX251bWJlcj8uWzBdLFxuICAgICAgICBhbW91bnQ6IHJlcS5ib2R5LmFtb3VudCB8fCAn5LiN5piOJyxcbiAgICAgICAgY2FyZDoge1xuICAgICAgICAgIG51bWJlcjoge1xuICAgICAgICAgICAgcHJlZml4OiBwYXlQYXJzZWQucmVzcG9uc2UuY2FyZD8uWzBdPy5udW1iZXI/LlswXT8ucHJlZml4Py5bMF0gfHwgJyoqJyxcbiAgICAgICAgICAgIHN1ZmZpeDogcGF5UGFyc2VkLnJlc3BvbnNlLmNhcmQ/LlswXT8ubnVtYmVyPy5bMF0/LnN1ZmZpeD8uWzBdIHx8ICcqKioqJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYW1fZGF0YToge1xuICAgICAgICAgIHN5b25pbjogcGF5UGFyc2VkLnJlc3BvbnNlLmFtX2RhdGE/LlswXT8uc3lvbmluPy5bMF0sXG4gICAgICAgICAgZGVucHlvOiBwYXlQYXJzZWQucmVzcG9uc2UuYW1fZGF0YT8uWzBdPy5kZW5weW8/LlswXVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBzYXZlUGF5bWVudFJlc3VsdChwYXltZW50SWQsIHBheW1lbnREYXRhKTtcbiAgICAgIGNvbnNvbGUubG9nKCfmsbrmuIjmg4XloLHjgpLkv53lrZjjgZfjgb7jgZfjgZ86JywgeyBwYXltZW50SWQsIHBheW1lbnREYXRhIH0pO1xuXG4gICAgICAvLyDmiJDlip/jg6zjgrnjg53jg7PjgrnvvIhwYXltZW50X2lk44KS5ZCr44KB44KL77yJXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgcGF5bWVudF9pZDogcGF5bWVudElkLFxuICAgICAgICByZWRpcmVjdF91cmw6IGAvcGF5bWVudC1yZXN1bHQ/cGF5bWVudF9pZD0ke3BheW1lbnRJZH1gXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8g5Lul5YmN44Guc3RlcOODmeODvOOCueOBruOCs+ODvOODie+8iOS6kuaPm+aAp+OBruOBn+OCgeOBq+aui+OBl+OBpuOBiuOBj+WgtOWQiO+8iVxuICAgIGNvbnNvbGUuZXJyb3IoJ+eEoeWKueOBquODquOCr+OCqOOCueODiOW9ouW8jycpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTUTjgahQYVJlc+OBjOW/heimgeOBp+OBmScgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign5Yem55CG44Ko44Op44O8OicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIGVycm9yOiAn5YaF6YOo44K144O844OQ44O844Ko44Op44O8JyxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ+S4jeaYjuOBquOCqOODqeODvCcgXG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiYXhpb3MiLCJCdWlsZGVyIiwicGFyc2VTdHJpbmdQcm9taXNlIiwiWkVVU19FTkRQT0lOVCIsImJ1aWxkZXIiLCJoZWFkbGVzcyIsImdlbmVyYXRlU2ltcGxlSWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJib2R5IiwiY2xpZW50SXAiLCJwcm9jZXNzIiwiZW52IiwiWkVVU19DTElFTlRfSVAiLCJhcGlLZXkiLCJaRVVTX0tFWSIsIk1EIiwiUGFSZXMiLCJzdGF0dXMiLCJhdXRoUmVxT2JqIiwicmVxdWVzdCIsIiQiLCJzZXJ2aWNlIiwiYWN0aW9uIiwiYXV0aGVudGljYXRpb24iLCJjbGllbnRpcCIsImtleSIsInhpZCIsImF1dGhYbWwiLCJidWlsZE9iamVjdCIsImF1dGhSZXMiLCJwb3N0IiwiaGVhZGVycyIsImF1dGhQYXJzZWQiLCJkYXRhIiwicmVzcG9uc2UiLCJyZXN1bHQiLCJlcnJvciIsImpzb24iLCJjb2RlIiwicGF5UmVxT2JqIiwicHJpbnRfYW0iLCJwcmludF9hZGRpdGlvbl92YWx1ZSIsInBheVhtbCIsInBheVJlcyIsInBheVBhcnNlZCIsImdldEVycm9yTWVzc2FnZSIsImVycm9yTWVzc2FnZXMiLCJkZWZhdWx0IiwicGF5bWVudElkIiwiZXJyb3JDb2RlIiwicGF5bWVudERhdGEiLCJlcnJvcl9jb2RlIiwiZXJyb3JfbWVzc2FnZSIsInRyYW5zYWN0aW9uX2lkIiwib3JkZXJfbnVtYmVyIiwiYW1vdW50IiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJwYXltZW50X2lkIiwicmVkaXJlY3RfdXJsIiwiY2FyZCIsIm51bWJlciIsInByZWZpeCIsInN1ZmZpeCIsImFtX2RhdGEiLCJzeW9uaW4iLCJkZW5weW8iLCJtZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/payment-result.js\n");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "xml2js":
/*!*************************!*\
  !*** external "xml2js" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("xml2js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpayment-result&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fpayment-result.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();